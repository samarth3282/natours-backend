<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Razorpay Payment Test - Natours</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .payment-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .btn {
            background-color: #55c57a;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
            width: 100%;
        }

        .btn:hover {
            background-color: #4aab6c;
        }

        .tour-info {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>

<body>
    <div class="payment-card">
        <h1>üèîÔ∏è Natours Payment Test</h1>
        <p>Test Razorpay integration for tour bookings</p>

        <div class="tour-info">
            <h3>Sample Tour: The Forest Hiker</h3>
            <p><strong>Price:</strong> ‚Çπ2,497</p>
            <p><strong>Duration:</strong> 5 days</p>
            <p><strong>Difficulty:</strong> Easy</p>
        </div>

        <button id="pay-button" class="btn">Pay with Razorpay</button>

        <div id="status"></div>

        <h3>üìã Setup Instructions:</h3>
        <ol>
            <li>Sign up at <a href="https://razorpay.com" target="_blank">Razorpay.com</a></li>
            <li>Get your API keys from the Razorpay dashboard</li>
            <li>Update your <code>config.env</code> file with:
                <pre style="background: #f0f0f0; padding: 10px; margin: 10px 0;">
RAZORPAY_KEY_ID=your_key_id_here
RAZORPAY_KEY_SECRET=your_key_secret_here</pre>
            </li>
            <li>Use test credentials for development</li>
        </ol>

        <h3>üß™ Test Cards for Razorpay:</h3>
        <ul>
            <li><strong>Success:</strong> 4111 1111 1111 1111</li>
            <li><strong>Failure:</strong> 4000 0000 0000 0002</li>
            <li><strong>Any CVV and future expiry date</strong></li>
        </ul>
    </div>

    <!-- Razorpay Script -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>
        document.getElementById('pay-button').onclick = function (e) {
            e.preventDefault();

            // First create an order on the backend
            // Note: This is a simplified example. In a real app, you would:
            // 1. Have user authentication
            // 2. Call your backend API to create the order
            // 3. Handle the payment verification on the backend

            const options = {
                "key": "rzp_test_your_key_id_here", // Replace with your Razorpay key
                "amount": "249700", // Amount in paise (‚Çπ2,497)
                "currency": "INR",
                "name": "Natours",
                "description": "The Forest Hiker Tour Booking",
                "image": "https://your-domain.com/logo.png",
                "order_id": "order_test_123", // This should come from your backend
                "handler": function (response) {
                    showStatus(`Payment successful!<br>
                        Payment ID: ${response.razorpay_payment_id}<br>
                        Order ID: ${response.razorpay_order_id}<br>
                        Signature: ${response.razorpay_signature}`, 'success');
                },
                "prefill": {
                    "name": "Test User",
                    "email": "test@example.com",
                    "contact": "9999999999"
                },
                "notes": {
                    "tour_id": "test_tour_123",
                    "user_id": "test_user_123"
                },
                "theme": {
                    "color": "#55c57a"
                }
            };

            const rzp = new Razorpay(options);
            rzp.on('payment.failed', function (response) {
                showStatus(`Payment failed!<br>
                    Error Code: ${response.error.code}<br>
                    Error Description: ${response.error.description}<br>
                    Error Source: ${response.error.source}<br>
                    Error Step: ${response.error.step}<br>
                    Error Reason: ${response.error.reason}`, 'error');
            });

            rzp.open();
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = message;
            statusDiv.className = `status ${type}`;
        }
    </script>
</body>

</html>